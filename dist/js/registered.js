function getUrlStr(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null}$.ajax({url:WWW_URL+"/config",type:"get",success:function(t){console.log(t);for(var e=t.data,n=0;n<e.length;n++){if(18==e[n].type){var o='<option value="'+e[n].id+'">'+e[n].cat+"</option>";$(".orgType").append(o)}if(12==e[n].type){o='<option value="'+e[n].id+'">'+e[n].cat+"</option>";$(".org").append(o)}}}});var yzm,inviteId=getUrlStr("inviteId");function selectType(t){$("#userType").val(t),$("#formReg").css({display:"block"}),$(".usertypeBox").fadeOut()}function yanzhengma(){var t=$("#phone").val();if(console.log(t),11!=t.length)return layer.msg("请输入正确的手机号"),!1;$("#yanzheng").html(60),$("#yanzheng").css({background:"#999",border:"#999"});var e=setInterval(function(){var t=$("#yanzheng").html();0==t?($("#yanzheng").html("发送"),$("#yanzheng").css({background:"#dd514c",border:"#dd514c"}),clearInterval(e)):$("#yanzheng").html(t-1)},1e3),n=new Date,o=n.getFullYear().toString()+(1==(n.getMonth()+1).toString().length?0+(n.getMonth()+1).toString():(n.getMonth()+1).toString())+(1==n.getDate().toString().length?0+n.getDate().toString():n.getDate().toString())+(1==n.getHours().toString().length?0+n.getHours().toString():n.getHours().toString())+(1==n.getMinutes().toString().length?0+n.getMinutes().toString():n.getMinutes().toString())+(1==n.getSeconds().toString().length?0+n.getSeconds().toString():n.getSeconds().toString());console.log(3333,1==(n.getMonth()+1).toString().length);var a="N00000014371:"+o,r=window.btoa(a),i="N0000001437153e67950-6774-11e7-a03d-25548cb1958d"+o,l=calcMD5(i).toUpperCase();console.log(6666,o),console.log(7777,i);var g=parseInt(-899998*Math.random()+999999).toString();console.log("yzm",g),yzm=calcMD5(g);var s='{"password":"YLHdmFoX7C","num":"'+t+'","templateNum":"6","var1":"'+g+'","var2":"10"}';$.ajax({headers:{Accept:"application/json",Authorization:r,"Content-Type":"application/json;charset=utf-8"},url:"https://apis.7moor.com/v20160818/sms/sendInterfaceTemplateSms/N00000014371?sig="+l,type:"POST",dataType:"json",data:s,success:function(t){console.log(t)}})}function getUrlPar(t){var e=new RegExp("(^|&)"+t+"=([^&]*)(&|$)"),n=window.location.search.substr(1).match(e);return null!=n?unescape(n[2]):null}function submitBtn(){var t=$("#yanzmtxt").val();if(calcMD5(t)!=yzm)return layer.msg("验证码错误"),!1;var e=$("#diquDD").html().replace(/\s/g,"").split("&gt;"),n=JSON.stringify(e);$("#regionInput").val(n),$.ajax({url:WWW_URL+"/user/register",type:"POST",data:$("#formReg").serialize(),success:function(t){if(console.log(112233445566,t),"0"==t.status){layer.msg("提交注册信息成功，请等待管理员审核！");var e=getUrlPar("userId");null!=e?$.ajax({url:WWW_URL+"/invite/create",type:"POST",headers:HEADER,data:{userId:t.data.id,inviteId:e},success:function(t){return!1}}):setTimeout(function(){window.location.href="./login.html"},1200)}else layer.msg(t.msg)}})}null!=inviteId?$("#inviteId").val(inviteId):$("#inviteId").val("-1");